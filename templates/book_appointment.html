{%extends 'base.html' %}
{%block body%}
<script>
    function filter_doc(department){
        var d=department.indexOf(',')
        console.log(d)  // Function to get the dept and doc name from the chosen option
        document.getElementById('doc').value = department.slice(2,d-1)  // Slice doc name
        department=department.slice(d+3,-2)                     // Slice dept name
        document.getElementById('dept').value = department;  
    }

</script>

<div class="container theme-showcase col-sm-6 col-sm-offset-3" role="main">

    <div class="row">
      <div>

        <div class="panel panel-primary">

          <div class="panel-heading">
            <h3 class="panel-title">Book an appointment</h3>
          </div>

          <div class="panel-body">

            <form method="POST" action="">
              <div class="form-group">

                <div class="form-group">
                    <label for="department">Available doctors: <br>

                        <select name=department method="GET" action="/" onchange="filter_doc(this.value)">
                            <option value= ""></option>
                            {% for doc in docs %}
                                <option value= "{{doc}}">{{doc[0]}}, {{doc[1]}}</option>
                            {% endfor %}
                        </select>

                    </label>
                </div>

                <div class="form-group">
                    <label for="doc">Selected Doctor
                        <input type="text" class="form-control" id="doc" name="doc" placeholder="" required>
                    </label>
                </div> 

                 <div class="form-group">
                    <label for="dept">Selected Department
                        <input type="text" class="form-control" id="dept" name="dept" placeholder="" required>
                    </label>
                </div>

                <div class="form-group">
                    <label for="desc">Description/Symptoms
                        <input type="text" class="form-control" id="desc" name="desc" placeholder="" required>
                    </label>
                </div>
                
                <div class="form-group">
                    <label for="date">Enter date
                        <input type="date" class="form-control" id="date" name="date" placeholder="" required>
                    </label>
                </div>
              
                <div class="form-group">
                    <label for="time">Enter time
                        <input type="time" class="form-control" id="time" name="time" placeholder="" required>
                    </label>
                </div>
              
              
              <button type="submit" class="btn btn-primary">Book</button>
            </form>

        </div>
      </div>
    </div>

  </div>
  {%endblock%}